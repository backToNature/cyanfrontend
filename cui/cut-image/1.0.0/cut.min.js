function cutImg(c,d){var j=document.createElement("style"),i="#cut-container{width: 100%;height: 100%;position: relative;background: #FFF;overflow: hidden!important;}#cut-container .maskTB{width: 100%;height: 50px;background: #000;opacity: 0.5;filter: alpha(opacity=50);position: absolute;left: 0;z-index: 10}#cut-container .maskT{top: 0;}#cut-container .maskB{bottom: 0;}#cut-container .maskLR{position: absolute;background: #000;opacity: 0.5;filter: alpha(opacity=50);height: 200px;width: 50px;top: 50px;z-index: 10;}#cut-container .maskL{left: 0;}#cut-container .maskR{right: 0;}#cut-container img{position: absolute;cursor: move;display: block;}";j.type="text/css";if(j.styleSheet){j.styleSheet.cssText=i}else{j.innerHTML=i}c.append(j);this.$container=c;var b=this.$container;c.width(d.containerWidth).height(d.containerHeight);var f='<div id="cut-container" class="container" >'+'<div node-type="border" class="maskTB maskT"></div>'+'<div node-type="border" class="maskTB maskB"></div>'+'<div node-type="border" class="maskLR maskL"></div>'+'<div node-type="border" class="maskLR maskR"></div>'+'<img id="cut-img" src="'+d.url+'">'+"</div>";b.append(f);this.$cutImg=this.$container.find("img");var e=this.$cutImg;this.moving=false;this.borderWidth=(this.$container.width()-d.cutWidth)/2;this.borderHeight=(this.$container.height()-d.cutHeight)/2;this.scale=0;this.cutWidth=d.cutWidth;this.cutHeight=d.cutHeight;var h=this;this.$cutImg.load(function(){$(this).css({left:(b.width()-e.width())/2+"px",top:(b.height()-e.height())/2+"px"});h.initialWidth=h.$cutImg.width();h.initialHeight=h.$cutImg.height();h.initialX=parseFloat(h.$cutImg.css("left"));h.initialY=parseFloat(h.$cutImg.css("top"))});this.$cutImg.mousedown(function(m){var n=$(this);var m=m||window.event;moving=true;var l=m.clientX-n.offset().left;var k=m.clientY-n.offset().top;n.mousemove(function(o){if(moving){var o=o||window.event;if(o.preventDefault){o.preventDefault();o.stopPropagation()}else{o.returnValue=false;o.cancelBubble=true}$(this).css({left:o.clientX-b.offset().left-l+"px",top:o.clientY-b.offset().top-k+"px"})}})});this.$cutImg.mouseup(function(){moving=false});this.$container.find('div[node-type="border"]').mouseover(function(){moving=false});var a=this.borderWidth;var g=this.borderHeight;c.find(".maskTB").height(g);c.find(".maskLR").width(a).height(d.cutHeight).css("top",g+"px")}cutImg.prototype.bigger=function(){this.scale+=1;var b=parseFloat(this.$cutImg.css("left"))-this.initialX;var a=parseFloat(this.$cutImg.css("top"))-this.initialY;this.$cutImg.width(this.initialWidth*(1+this.scale*0.1));this.$cutImg.height(this.initialHeight*(1+this.scale*0.1));this.$cutImg.css({left:this.initialX-(this.$cutImg.width()-this.initialWidth*(1+(this.scale-1)*0.1))/2+b+"px",top:this.initialY-(this.$cutImg.height()-this.initialHeight*(1+(this.scale-1)*0.1))/2+a+"px"})};cutImg.prototype.smaller=function(){this.scale-=1;var b=parseFloat(this.$cutImg.css("left"))-this.initialX;var a=parseFloat(this.$cutImg.css("top"))-this.initialY;this.$cutImg.width(this.initialWidth*(1+this.scale*0.1));this.$cutImg.height(this.initialHeight*(1+this.scale*0.1));this.$cutImg.css({left:this.initialX-(this.$cutImg.width()-this.initialWidth*(1+(this.scale+1)*0.1))/2+b+"px",top:this.initialY-(this.$cutImg.height()-this.initialHeight*(1+(this.scale+1)*0.1))/2+a+"px"})};cutImg.prototype.cut=function(e){var d=this.$cutImg.attr("src");var c=parseFloat(-(this.$cutImg.offset().left-this.$container.offset().left-this.borderWidth));var b=parseFloat(-(this.$cutImg.offset().top-this.$container.offset().top-this.borderWidth));var a=1+this.scale*0.1;var f=this;$.ajax({type:"GET",url:"http://10.10.69.41/image/clip",data:{imageUrl:d,zoom:a,startX:c,startY:b,targetWidth:f.cutWidth,targetHeight:f.cutHeight,colorNum:1},dataType:"jsonp",success:function(g){if(g.message==="OK"){e(g.data)}}})};